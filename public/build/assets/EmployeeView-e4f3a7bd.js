import{a as p,b as g,f as i,y as q,n as O,c as F,T as Y,d as l,u as t,_ as o,Z as z,e,t as a,g as k,h as s,F as N,l as H,i as B,j as R,m as S,v as E,z as I,O as G}from"./app-2686a8d6.js";import{_ as K}from"./GoBackNavLink-157ed159.js";import{_ as W}from"./EmployeeTabs-d1060860.js";import{_ as V}from"./FlexButton-889c2a04.js";import{_ as C}from"./Card-60d612fc.js";import{M as U}from"./ModifyIcon-9b38d68b.js";import{D as j,_ as r,a as h}from"./DescriptionListItem-185cda1a.js";import{_ as M}from"./GenericModal-eb50c113.js";import{_ as L,a as f}from"./TableHead-2ee41281.js";import{_ as c,T as P}from"./TableRow-6ae7fca0.js";import"./index-7c45f06a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Paginator-e0618a15.js";function Z(){function A(d){const v=d.toString().replace(/-/g,""),T=parseInt(v.charAt(v.length-1))%2!==0,m=v.charAt(0);return{year:null,month:null,day:null,date:"Not available in CNIC",date_localized:"Not available in CNIC",state:{1:"Khyber Pakhtunkhwa",2:"FATA (Merged)",3:"Punjab",4:"Sindh",5:"Balochistan",6:"Islamabad (ICT)",7:"Gilgit-Baltistan"}[m]||"Unknown",isMale:T}}return{extractPersonalDetails:A}}function J(A){const d=new Date(A),v=new Date;let D=v.getFullYear()-d.getFullYear();return(v.getMonth()<d.getMonth()||v.getMonth()===d.getMonth()&&v.getDate()<d.getDate())&&D--,Math.abs(D)}const Q={class:"overflow-hidden sm:rounded-lg"},X={class:O("grid grid-cols-2")},ee={__name:"HistoryDescriptionList",props:{},setup(A){return(d,v)=>(p(),g("div",Q,[i("dl",null,[i("div",X,[q(d.$slots,"default")])])]))}},le={class:"py-8"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"flex justify-between items-center mb-4"},oe={class:"card-header"},se={class:"flex gap-4"},ne={class:"card-subheader"},de=["href"],ie=["href"],ue=["href"],re={class:"mb-2 ml-1 font-semibold"},_e={class:"mb-2 ml-1 font-semibold"},fe={key:0,class:"text-center py-4"},ce={class:"flex justify-between items-center mb-2"},me=i("h2",{class:"mb-2 ml-1 font-semibold"},"Leave History",-1),pe={class:"p-1 space-y-5"},he={class:"block text-sm font-semibold text-gray-700 mb-1.5"},ye={value:"casual"},ge={value:"sick"},ve={class:"block text-sm font-semibold text-gray-700 mb-1.5"},be={value:"full"},xe={value:"half"},ke={class:"bg-slate-50 p-4 rounded-xl border border-slate-200"},De={key:0,class:"grid grid-cols-2 gap-4"},Ae={class:"flex flex-col gap-1"},Ne={class:"text-[10px] uppercase font-bold text-slate-400 tracking-wider"},Se={class:"flex flex-col gap-1"},we={class:"text-[10px] uppercase font-bold text-slate-400 tracking-wider"},He=i("option",{value:"first half"}," First Half ",-1),Ce=i("option",{value:"second half"}," Second Half ",-1),Le=[He,Ce],Pe={key:1,class:"grid grid-cols-2 gap-4"},Me={class:"flex flex-col gap-1"},Te={class:"text-[10px] uppercase font-bold text-slate-400 tracking-wider"},Be={class:"flex flex-col gap-1"},Ee={class:"text-[10px] uppercase font-bold text-slate-400 tracking-wider"},Ie={class:"flex justify-end items-center gap-3 mt-4"},$e={type:"button",class:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors","data-modal-hide":"AdminAddLeave"},Fe=["onClick"],Ve={key:0},Ue={key:1},je={key:0},qe={key:1},Oe={key:1,class:"text-center py-4"},Ye={class:"mb-2 ml-1 font-semibold"},ze={class:"px-4 py-3.5"},Re={class:"text-sm font-medium"},Ge={class:"px-4 py-3.5"},Ke={class:"text-sm font-medium"},We={class:"px-4 py-3.5"},Ze={class:"text-sm font-medium"},rl={__name:"EmployeeView",props:{employee:Object},setup(A){const d=A;let{extractPersonalDetails:v}=Z();const D=F(()=>{var x;return((x=d.employee)==null?void 0:x.leave_requests)??[]}),T=F(()=>{var w;const y=(((w=d.employee)==null?void 0:w.manages)??[]).map(b=>({department_id:b.department_id,branch_id:b.branch_id})).filter(b=>b.department_id||b.branch_id),u=y.map(b=>b.branch_id).filter(Boolean).join(", "),n=y.map(b=>b.department_id).filter(Boolean).join(", ");let _="";return u&&(_+=o("Branches")+`: #${u}`),n&&(_+=(_?" - ":"")+o("Departments")+`: #${n}`),_}),m=Y({leave_type:"casual",leave_duration:"full",start_date:null,end_date:null,half_leave_date:null,half_leave_segment:"first half"}),$=()=>{m.post(route("admin.leave.add",d.employee.id),{leave_type:m.leave_type,leave_duration:m.leave_duration,start_date:m.start_date,end_date:m.end_date,half_leave_date:m.half_leave_date,half_leave_segment:m.half_leave_segment},{onSuccess:()=>{var x;m.reset(),(x=document.querySelector('[data-modal-hide="AdminAddLeave"]'))==null||x.click(),G.reload({only:["employee"]})}})};return(x,y)=>(p(),g(N,null,[l(t(z),{title:t(o)("Employee View")},null,8,["title"]),l(K,null,{tabs:e(()=>[l(W)]),default:e(()=>[i("div",le,[i("div",te,[l(C,{class:"!mt-0"},{default:e(()=>{var u;return[i("div",ae,[i("h1",oe,a(t(o)("Employee View :ifAdmin",{ifAdmin:(u=d.employee.manages)!=null&&u.length?"("+t(o)("Manager")+")":""})),1),i("div",se,[x.$page.props.auth.user.roles.includes("admin")?(p(),k(V,{key:0,text:t(o)("Modify Employee Data"),href:x.route("employees.edit",{id:d.employee.id})},{default:e(()=>[l(U)]),_:1},8,["text","href"])):(p(),k(V,{key:1,text:t(o)("Modify Data"),href:x.route("profile.edit",{id:d.employee.id})},{default:e(()=>[l(U)]),_:1},8,["text","href"]))])]),i("h2",ne,a(t(o)("Basic Info")),1),l(j,null,{default:e(()=>[l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Name")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(d.employee.name),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("ID")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(d.employee.id),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Phone")),1)]),_:1}),l(r,null,{default:e(()=>[i("a",{href:"tel:"+d.employee.phone},a(d.employee.phone),9,de)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("National ID")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(d.employee.national_id),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Email")),1)]),_:1}),l(r,null,{default:e(()=>[i("a",{href:"mailto:"+d.employee.email},a(d.employee.email),9,ie)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Gender")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(t(v)(d.employee.national_id).isMale?t(o)("Male"):t(o)("Female")),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Bank Account Details")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(d.employee.bank_acc_no??t(o)("N/A")),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Birthday")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(t(v)(d.employee.national_id).date_localized+" - "+t(J)(t(v)(d.employee.national_id).date)+" "+t(o)("Years")),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Hire Date")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(d.employee.hired_on),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Remote Worker?")),1)]),_:1}),l(r,null,{default:e(()=>[s(a(d.employee.is_remote?t(o)("Yes"):t(o)("No")),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Address")),1)]),_:1}),l(r,null,{default:e(()=>[i("a",{href:"https://www.google.com/maps/search/?api=1&query="+d.employee.address,target:"_blank"},a(d.employee.address),9,ue)]),_:1})]),_:1})]),_:1})]}),_:1}),l(C,null,{default:e(()=>[i("h2",re,a(t(o)("Technical Info")),1),l(j,null,{default:e(()=>[l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Branch")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[s(a(((u=d.employee.branch)==null?void 0:u.name)??t(o)("N/A")),1)]}),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Department")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[s(a(((u=d.employee.department)==null?void 0:u.name)??t(o)("N/A")),1)]}),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Salary")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[s(a((u=d.employee.salaries)!=null&&u.length?d.employee.salaries.at(-1).salary.toLocaleString()+" "+d.employee.salaries.at(-1).currency:t(o)("N/A")),1)]}),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Position")),1)]),_:1}),l(r,null,{default:e(()=>{var u,n;return[s(a((u=d.employee.employee_positions)!=null&&u.length?((n=d.employee.employee_positions.at(-1).position)==null?void 0:n.name)??t(o)("N/A"):t(o)("N/A")),1)]}),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Shift")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[s(a((u=d.employee.employee_shifts)!=null&&u.length?d.employee.employee_shifts.filter(n=>n.end_date===null).map(n=>{var _;return(_=n.shift)==null?void 0:_.name})[0]??t(o)("N/A"):t(o)("N/A")),1)]}),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Access Permissions")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[s(a((u=d.employee.roles)!=null&&u.length?d.employee.roles.at(-1).name.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()):t(o)("Not Assigned")),1)]}),_:1})]),_:1}),l(r,null,{default:e(()=>[l(h,null,{default:e(()=>[s(a(t(o)("Manages")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[s(a((u=d.employee.manages)!=null&&u.length?T.value:t(o)("Nothing")),1)]}),_:1})]),_:1})]),_:1})]),_:1}),l(C,null,{default:e(()=>{var u,n;return[i("h2",_e,a(t(o)("Leave Allocations")),1),l(L,{totalNumber:((u=d.employee.leave_allocations)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(f,null,{default:e(()=>[s(a(t(o)("Total Leaves")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Casual Leaves")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Sick Leaves")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Used Leaves")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Remaining Leaves")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Unpaid Leaves")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Year")),1)]),_:1})]),Body:e(()=>[(p(!0),g(N,null,H(d.employee.leave_allocations??[],_=>(p(),k(P,{key:_.id},{default:e(()=>[l(c,null,{default:e(()=>[s(a(_.total_leaves),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(_.casual_leaves),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(_.sick_leaves),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(_.used_leaves),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(_.remaining_leaves),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(_.unpaid_leaves),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(_.year),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"]),(n=d.employee.leave_allocations)!=null&&n.length?B("",!0):(p(),g("p",fe,a(t(o)("No leave allocations found")),1))]}),_:1}),l(C,null,{default:e(()=>{var u;return[i("div",ce,[me,l(M,{modalId:"AdminAddLeave",title:t(o)("Add Leave"),modalHeader:t(o)("Add Leave for Employee"),hasCustomFooter:!0},{customFooter:e(()=>[i("div",Ie,[i("button",$e,a(t(o)("Cancel")),1),i("button",{type:"button",onClick:R($,["stop","prevent"]),class:"px-6 py-2 text-sm font-bold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 shadow-lg shadow-indigo-100 active:scale-95 transition-all"},a(t(o)("Add Leave")),9,Fe)])]),default:e(()=>[i("div",pe,[i("div",null,[i("label",he,a(t(o)("Leave Type")),1),S(i("select",{"onUpdate:modelValue":y[0]||(y[0]=n=>t(m).leave_type=n),class:"w-full rounded-lg border-gray-300 text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"},[i("option",ye,a(t(o)("Casual Leave")),1),i("option",ge,a(t(o)("Sick Leave")),1)],512),[[E,t(m).leave_type]])]),i("div",null,[i("label",ve,a(t(o)("Duration")),1),S(i("select",{"onUpdate:modelValue":y[1]||(y[1]=n=>t(m).leave_duration=n),class:"w-full rounded-lg border-gray-300 text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"},[i("option",be,a(t(o)("Full Day")),1),i("option",xe,a(t(o)("Half Day")),1)],512),[[E,t(m).leave_duration]])]),i("div",ke,[t(m).leave_duration==="half"?(p(),g("div",De,[i("div",Ae,[i("span",Ne,a(t(o)("Date")),1),S(i("input",{type:"date","onUpdate:modelValue":y[2]||(y[2]=n=>t(m).half_leave_date=n),class:"rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[I,t(m).half_leave_date]])]),i("div",Se,[i("span",we,a(t(o)("Segment")),1),S(i("select",{"onUpdate:modelValue":y[3]||(y[3]=n=>t(m).half_leave_segment=n),class:"rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},Le,512),[[E,t(m).half_leave_segment]])])])):B("",!0),t(m).leave_duration==="full"?(p(),g("div",Pe,[i("div",Me,[i("span",Te,a(t(o)("Start Date")),1),S(i("input",{type:"date","onUpdate:modelValue":y[4]||(y[4]=n=>t(m).start_date=n),class:"rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[I,t(m).start_date]])]),i("div",Be,[i("span",Ee,a(t(o)("End Date")),1),S(i("input",{type:"date","onUpdate:modelValue":y[5]||(y[5]=n=>t(m).end_date=n),class:"rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[I,t(m).end_date]])])])):B("",!0)])])]),_:1},8,["title","modalHeader"])]),(u=D.value)!=null&&u.length?(p(),k(L,{key:0,totalNumber:D.value.length,enablePaginator:!1},{Head:e(()=>[l(f,null,{default:e(()=>[s("Type")]),_:1}),l(f,null,{default:e(()=>[s("From")]),_:1}),l(f,null,{default:e(()=>[s("To")]),_:1}),l(f,null,{default:e(()=>[s("Duration")]),_:1}),l(f,null,{default:e(()=>[s("Half")]),_:1}),l(f,null,{default:e(()=>[s("Status")]),_:1}),l(f,null,{default:e(()=>[s("Remaining")]),_:1}),l(f,null,{default:e(()=>[s("Unpaid")]),_:1})]),Body:e(()=>[(p(!0),g(N,null,H(D.value,n=>(p(),k(P,{key:n.id},{default:e(()=>[l(c,null,{default:e(()=>[s(a(n.leave_type),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.start_date??"—"),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.end_date??"—"),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.leave_duration),1)]),_:2},1024),l(c,null,{default:e(()=>[n.half_leave_date?(p(),g("span",Ve,a(n.half_leave_date)+" ("+a(n.half_leave_segment)+") ",1)):(p(),g("span",Ue,"—"))]),_:2},1024),l(c,null,{default:e(()=>{var _,w,b;return[(_=n.request)!=null&&_.is_admin_created?(p(),g("span",je," Approved (Added by "+a((w=n.request.created_by_admin)==null?void 0:w.name)+") ",1)):(p(),g("span",qe,a(((b=n.request)==null?void 0:b.status)??"Unknown"),1))]}),_:2},1024),l(c,null,{default:e(()=>[s(a(n.remaining_after),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.unpaid_leave),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])):(p(),g("p",Oe," No leave history found "))]}),_:1}),l(C,null,{default:e(()=>[i("h2",Ye,a(t(o)("History")),1),l(ee,null,{default:e(()=>[i("div",ze,[i("dt",Re,a(t(o)("Previous Salaries")),1),l(M,{modalId:"Salaries Modal",title:t(o)("Click Here To See Salary History"),modalHeader:t(o)("Previous Salaries"),hasCancel:!1},{default:e(()=>{var u;return[l(L,{totalNumber:((u=d.employee.salaries)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(f,null,{default:e(()=>[s(a(t(o)("Currency")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Salary")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Starting From")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Ending At")),1)]),_:1})]),Body:e(()=>[(p(!0),g(N,null,H(d.employee.salaries??[],n=>(p(),k(P,{key:n.id},{default:e(()=>[l(c,null,{default:e(()=>[s(a(n.currency),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.salary),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.start_date),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.end_date??t(o)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])]}),_:1},8,["title","modalHeader"])]),i("div",Ge,[i("dt",Ke,a(t(o)("Previous Positions")),1),l(M,{modalId:"Positions Modal",title:t(o)("Click Here To See Positions History"),modalHeader:t(o)("Previous Positions"),hasCancel:!1},{default:e(()=>{var u;return[l(L,{totalNumber:((u=d.employee.employee_positions)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(f,null,{default:e(()=>[s(a(t(o)("Position")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Starting From")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Ending At")),1)]),_:1})]),Body:e(()=>[(p(!0),g(N,null,H(d.employee.employee_positions??[],n=>(p(),k(P,{key:n.id},{default:e(()=>[l(c,null,{default:e(()=>{var _;return[s(a(((_=n.position)==null?void 0:_.name)??t(o)("DELETED POSITION")),1)]}),_:2},1024),l(c,null,{default:e(()=>[s(a(n.start_date),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.end_date??t(o)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])]}),_:1},8,["title","modalHeader"])]),i("div",We,[i("dt",Ze,a(t(o)("Previous Shifts")),1),l(M,{modalId:"Shifts Modal",title:t(o)("Click Here To See Shifts History"),modalHeader:t(o)("Previous Shifts"),hasCancel:!1},{default:e(()=>{var u;return[l(L,{totalNumber:((u=d.employee.employee_shifts)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(f,null,{default:e(()=>[s(a(t(o)("Shift")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Starting From")),1)]),_:1}),l(f,null,{default:e(()=>[s(a(t(o)("Ending At")),1)]),_:1})]),Body:e(()=>[(p(!0),g(N,null,H(d.employee.employee_shifts??[],n=>(p(),k(P,{key:n.id},{default:e(()=>[l(c,null,{default:e(()=>{var _;return[s(a(((_=n.shift)==null?void 0:_.name)??t(o)("DELETED SHIFT")),1)]}),_:2},1024),l(c,null,{default:e(()=>[s(a(n.start_date),1)]),_:2},1024),l(c,null,{default:e(()=>[s(a(n.end_date??t(o)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])]}),_:1},8,["title","modalHeader"])])]),_:1})]),_:1})])])]),_:1})],64))}};export{rl as default};
