import{c as T,T as U,o as C,a as y,b as x,d as i,u as e,_ as o,Z as E,e as p,f as s,t as n,j as S,n as u,h as r,i as O,F as v,l as q,g as N,m as b,x as h,p as $}from"./app-ed8fa722.js";import{_ as j}from"./AuthenticatedLayout-b0900d39.js";import{_ as A}from"./OrgTabs-e71e8651.js";import{_}from"./InputLabel-169502e4.js";import{_ as f}from"./TextInput-9a14af0f.js";import{_ as m}from"./InputError-3c55b147.js";import{P as D}from"./PrimaryButton-7737dff1.js";import{S as w}from"./sweetalert2.all-8a6accd5.js";/* empty css             */import{i as W}from"./index-7c45f06a.js";import{_ as g}from"./ToolTip-670fadec.js";import{_ as G}from"./Card-3b6a3666.js";import{_ as F}from"./Notice-8800d3eb.js";import{u as M}from"./switch-9366d0c2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./GoBackNavLink-a71eb687.js";const Y={class:"py-8"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"card-header !mb-6"},H=["onSubmit"],J={class:"mt-2"},K={class:"underline text-purple-500 text-sm",target:"_blank",href:"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"},Q=s("br",null,null,-1),R={class:"mt-2"},X=s("br",null,null,-1),ee=s("br",null,null,-1),le=s("br",null,null,-1),se={class:"block"},oe={class:"mt-1"},ae=s("br",null,null,-1),te=s("br",null,null,-1),ie=s("br",null,null,-1),ne=s("br",null,null,-1),re={key:0,class:"block text-xs"},de=s("br",null,null,-1),ce={class:"mt-2"},ue={class:"mt-2"},me={class:"mt-2"},_e={class:"mt-2"},pe=s("br",null,null,-1),fe={class:"mt-2"},be={class:"mt-2"},he={class:"ul-checkbox mt-1",dir:"ltr"},ye={class:"li-checkbox"},ge={class:"flex items-center pl-3"},xe={for:"saturday-checkbox",class:"li-checkbox-label"},ke={class:"li-checkbox"},ve={class:"flex items-center pl-3"},we={for:"sunday-checkbox",class:"li-checkbox-label"},ze={class:"li-checkbox"},Ve={class:"flex items-center pl-3"},Pe={for:"monday-checkbox",class:"li-checkbox-label"},Be={class:"li-checkbox"},Ie={class:"flex items-center pl-3"},Te={for:"tuesday-checkbox",class:"li-checkbox-label"},Ue={class:"li-checkbox"},Ce={class:"flex items-center pl-3"},Ee={for:"wednesday-checkbox",class:"li-checkbox-label"},Se={class:"li-checkbox"},Oe={class:"flex items-center pl-3"},qe={for:"thursday-checkbox",class:"li-checkbox-label"},Ne={class:"w-full dark:border-gray-600"},$e={class:"flex items-center pl-3"},je={for:"friday-checkbox",class:"li-checkbox-label"},Ae={class:"flex items-center justify-end mt-4"},sl={__name:"GlobalsEdit",props:{globals:Object},setup(z){var k;const c=z,V=T(()=>Object.keys(l.errors).filter(d=>d.startsWith("ip")).reduce((d,a)=>(d[a]=l.errors[a],d),{})),l=U({organization_name:c.globals.organization_name,timezone:c.globals.timezone,is_ip_based:!!c.globals.is_ip_based,ip:c.globals.is_ip_based?((k=c.globals.ip)==null?void 0:k.join(", "))??"":"",email:c.globals.email,organization_address:c.globals.organization_address,absence_limit:c.globals.absence_limit,payroll_day:c.globals.payroll_day,weekend_off_days:c.globals.weekend_off_days??[],income_tax:c.globals.income_tax}),P=()=>{w.mixin({customClass:{confirmButton:"mx-4 text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900",cancelButton:"text-white bg-gray-500 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-900"},buttonsStyling:!1}).fire({title:o("Are you sure?"),text:o("Globals data is central to this application data integrity!"),icon:"warning",showCancelButton:!0,confirmButtonText:o("Yes, Confirm!"),cancelButtonText:o("No, Cancel!"),reverseButtons:!0}).then(a=>{a.isConfirmed&&(l.ip!==null&&!Array.isArray(l.ip)&&(l.ip=l.ip.split(",").map(t=>t.trim()).filter(t=>t!==null&&t!=="")),l.put(route("globals.update"),{preserveScroll:!0,onError:()=>{$().error(o("Error Editing Globals"))},onSuccess:()=>{w.fire(o("Global Data Changed Successfully"),"","success")}}))})};async function B(){l.ip="Fetching IP, Please Wait...",fetch("https://api.ipify.org/?format=json").then(d=>{if(!d.ok)throw new Error("Network response was not ok");return d.json()}).then(d=>{l.ip=d.ip}).catch(d=>{console.error("Error fetching IP:",d.message)})}return C(()=>{W()}),(d,a)=>(y(),x(v,null,[i(e(E),{title:e(o)("Edit Organization Data")},null,8,["title"]),i(j,null,{tabs:p(()=>[i(A)]),default:p(()=>[s("div",Y,[s("div",L,[i(G,{class:"!mt-0"},{default:p(()=>[s("h1",Z,n(e(o)("Edit Organization Data")),1),i(F,{type:"warning",bold:e(o)("Warning!"),br:"",text:e(o)("Changing timezone in production can cause unexepected behavior in the attendance system")+". "+e(o)("Please revise the attendance list of the current week after changing the timezone")+"."},null,8,["bold","text"]),s("form",{onSubmit:S(P,["prevent"])},[s("div",null,[i(_,{for:"organization_name",value:e(o)("Organization Name")},null,8,["value"]),i(f,{id:"organization_name",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.organization_name}]),modelValue:e(l).organization_name,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).organization_name=t),required:"",autocomplete:"off",placeholder:e(o)("Organization Name")},null,8,["class","modelValue","placeholder"]),i(m,{class:"mt-2",message:e(l).errors.organization_name},null,8,["message"])]),s("div",J,[i(_,{for:"timezone",value:e(o)("Time Zone"),class:"inline"},null,8,["value"]),s("a",K,n(" "+e(o)("(list)")),1),i(g,null,{default:p(()=>[r(n(e(o)("This is the timezone that will be used to calculate the time related data in the application."))+" ",1),Q,r(" "+n(e(o)("Please choose a timezone from the list.")),1)]),_:1}),i(f,{id:"timezone",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.timezone}]),modelValue:e(l).timezone,"onUpdate:modelValue":a[1]||(a[1]=t=>e(l).timezone=t),required:"",autocomplete:"off",placeholder:"Africa/Cairo"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.timezone},null,8,["message"])]),s("div",R,[i(_,{class:"inline",for:"is_remote",value:e(o)("Enable IP-Based Attendance?")},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(o)("The set IPs will be used to compare employee attendance's IP with it"))+". ",1),X,r(" "+n(e(o)("If the IPs mismatch, it means the employee is registering their attendance"))+" ",1),ee,r(" "+n(e(o)("from outside the organization. Thus, the attendance will be discarded"))+".",1),le,r(" "+n(e(o)("You can turn this option off on this page"))+". ",1)]),_:1}),s("div",se,[i(e(M),{dir:"ltr",modelValue:e(l).is_ip_based,"onUpdate:modelValue":a[2]||(a[2]=t=>e(l).is_ip_based=t),class:u([e(l).is_ip_based?"bg-purple-600":"bg-gray-400","col-span-4 mt-2 relative inline-flex h-6 w-11 items-center rounded-full"])},{default:p(()=>[s("span",{class:u([e(l).is_ip_based?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"])]),i(m,{class:"mt-2",message:e(l).errors.is_ip_based},null,8,["message"])]),s("div",oe,[i(_,{for:"ip",value:e(o)("Organization Public IP Address(es) - Separate multiple values by commas"),class:"inline"},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(o)("This IP(s) will be used to compare employee attendance's IP with it."))+" ",1),ae,r(" "+n(e(o)("If the IPs mismatch, it means the employee is registering their attendance"))+" ",1),te,r(" "+n(e(o)("from outside the organization. Thus, the attendance will be discarded.")),1),ie,r(" "+n(e(o)("You can turn this option off on this page"))+".",1),ne,r(" "+n(e(o)("Note: Supports IPv4 Only"))+". ",1)]),_:1}),e(l).is_ip_based?(y(),x("span",re,[s("a",{onClick:a[3]||(a[3]=t=>B()),class:"underline text-purple-500",href:"#"},n(e(o)("Grab Yours from Here,")),1),r(" "+n(e(o)("and make sure you are at your organization while setting this value, otherwise, all employee attendances will be rejected even if they are inside the organization."))+" ",1),de,r(" "+n(e(o)("If this app is hosted locally, you can use '192.168.1.*'")),1)])):O("",!0),i(f,{id:"timezone",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.ip,"opacity-75 bg-gray-100 cursor-not-allowed":!e(l).is_ip_based}]),disabled:!e(l).is_ip_based,modelValue:e(l).ip,"onUpdate:modelValue":a[4]||(a[4]=t=>e(l).ip=t),required:"",autocomplete:"off",placeholder:"193.107.235.96"},null,8,["class","disabled","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.ip},null,8,["message"]),(y(!0),x(v,null,q(V.value,(t,I)=>(y(),N(m,{key:I,message:t},null,8,["message"]))),128))]),s("div",ce,[i(_,{for:"email",value:e(o)("Organization Email")},null,8,["value"]),i(f,{id:"email",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.email}]),modelValue:e(l).email,"onUpdate:modelValue":a[5]||(a[5]=t=>e(l).email=t),required:"",autocomplete:"off",placeholder:"ceo@oraby.com"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.email},null,8,["message"])]),s("div",ue,[i(_,{for:"organization_address",value:e(o)("Organization Address")},null,8,["value"]),i(f,{id:"organization_address",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.organization_address}]),modelValue:e(l).organization_address,"onUpdate:modelValue":a[6]||(a[6]=t=>e(l).organization_address=t),required:"",autocomplete:"off",placeholder:e(o)("114 Juhayna Sq. 6th of October City, Giza, Egypt")},null,8,["class","modelValue","placeholder"]),i(m,{class:"mt-2",message:e(l).errors.organization_address},null,8,["message"])]),s("div",me,[i(_,{for:"absence_limit",value:e(o)("Absence Limit")},null,8,["value"]),i(f,{id:"absence_limit",type:"number",min:"1",max:"365",step:"1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.absence_limit}]),modelValue:e(l).absence_limit,"onUpdate:modelValue":a[7]||(a[7]=t=>e(l).absence_limit=t),required:"",autocomplete:"off",placeholder:"8"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.absence_limit},null,8,["message"])]),s("div",_e,[i(_,{for:"payroll_day",value:e(o)("Payroll Day"),class:"inline"},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(o)("Which day should the salaries be paid on. Payrolls will be generated automatically that day on 00:00."))+" ",1),pe,r(" "+n(e(o)("The generated payrolls account for the previous month's work, from day 1 until the end of the previous month.")),1)]),_:1}),i(f,{id:"payroll_day",type:"number",min:"1",max:"31",step:"1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.payroll_day}]),modelValue:e(l).payroll_day,"onUpdate:modelValue":a[8]||(a[8]=t=>e(l).payroll_day=t),required:"",autocomplete:"off",placeholder:"8"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.payroll_day},null,8,["message"])]),s("div",fe,[i(_,{for:"income_tax",value:e(o)("Income Tax Percentage")},null,8,["value"]),i(f,{id:"income_tax",type:"number",min:"0",max:"100",step:"0.1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.income_tax}]),modelValue:e(l).income_tax,"onUpdate:modelValue":a[9]||(a[9]=t=>e(l).income_tax=t),required:"",autocomplete:"off",placeholder:"14"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.income_tax},null,8,["message"])]),s("div",be,[i(_,{for:"weekend_off_days",value:e(o)("Weekend Off Days")},null,8,["value"]),s("ul",he,[s("li",ye,[s("div",ge,[b(s("input",{id:"saturday-checkbox",type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=t=>e(l).weekend_off_days=t),value:"saturday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",xe,n(e(o)("Saturday")),1)])]),s("li",ke,[s("div",ve,[b(s("input",{id:"sunday-checkbox",type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=t=>e(l).weekend_off_days=t),value:"sunday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",we,n(e(o)("Sunday")),1)])]),s("li",ze,[s("div",Ve,[b(s("input",{id:"monday-checkbox",type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=t=>e(l).weekend_off_days=t),value:"monday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Pe,n(e(o)("Monday")),1)])]),s("li",Be,[s("div",Ie,[b(s("input",{id:"tuesday-checkbox",type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=t=>e(l).weekend_off_days=t),value:"tuesday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Te,n(e(o)("Tuesday")),1)])]),s("li",Ue,[s("div",Ce,[b(s("input",{id:"wednesday-checkbox",type:"checkbox","onUpdate:modelValue":a[14]||(a[14]=t=>e(l).weekend_off_days=t),value:"wednesday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Ee,n(e(o)("Wednesday")),1)])]),s("li",Se,[s("div",Oe,[b(s("input",{id:"thursday-checkbox",type:"checkbox","onUpdate:modelValue":a[15]||(a[15]=t=>e(l).weekend_off_days=t),value:"thursday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",qe,n(e(o)("Thursday")),1)])]),s("li",Ne,[s("div",$e,[b(s("input",{id:"friday-checkbox",type:"checkbox","onUpdate:modelValue":a[16]||(a[16]=t=>e(l).weekend_off_days=t),value:"friday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",je,n(e(o)("Friday")),1)])])]),i(m,{class:"mt-2",message:e(l).errors.weekend_off_days},null,8,["message"])]),s("div",Ae,[i(D,{class:u(["ltr:ml-4 rtl:mr-4",{"opacity-25":e(l).processing}]),disabled:e(l).processing},{default:p(()=>[r(n(e(o)("Edit Data")),1)]),_:1},8,["class","disabled"])])],40,H)]),_:1})])])]),_:1})],64))}};export{sl as default};
