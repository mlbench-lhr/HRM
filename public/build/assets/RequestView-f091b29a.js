import{r as C,T as j,a as i,b as _,d as t,u as l,_ as u,Z as T,e,f as g,t as s,j as y,g as p,n as k,i as c,h as a,F as B,p as h}from"./app-c2b56efe.js";import{_ as $}from"./GoBackNavLink-61440505.js";import{_ as A}from"./ReqTabs-94c82156.js";import{_ as w,X as W}from"./XIcon-46148dfa.js";import{P as E}from"./PrimaryButton-23577d3f.js";import{S as x}from"./sweetalert2.all-d36e942b.js";import{_ as L}from"./Card-2b43e3a9.js";import{C as P}from"./CheckIcon-6a36c275.js";import{D as N,_ as n,a as o}from"./DescriptionListItem-3424c38d.js";import{D as d}from"./DD-806031cc.js";import"./_plugin-vue_export-helper-c27b6911.js";const V={class:"py-8"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"flex justify-between items-center mb-4"},O={class:"card-header mb-2"},Y={key:0,class:"flex inline-flex gap-4"},F=["onSubmit"],U={class:"mb-2 ml-1 font-semibold"},X=["onSubmit"],se={__name:"RequestView",props:{request:Object,requestTypes:Object},setup(r){const q=r,v=C(""),f=j({status:"",admin_response:""}),R=()=>{x.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:u("Are you sure You want to :sth this request?",{sth:v.value}),icon:"warning",showCancelButton:!0,confirmButtonText:u("Confirm"),cancelButtonText:u("Cancel"),inputLabel:v.value===u("reject")?u("(Optional) Provide a reason for rejecting this request:"):"",input:v.value===u("reject")?"textarea":"",inputPlaceholder:v.value===u("reject")?u("We can't accept this leave this week as Mark and Jose will be off and we will be understaffed."):"",reverseButtons:!0}).then(m=>{m.isConfirmed&&(f.admin_response=v.value===u("reject")?m.value:"",f.put(route("requests.update",{id:q.request.id}),{preserveScroll:!0,onError:()=>{h().error(u("Error Updating Request Status"))},onSuccess:()=>{h().success(u("Request Status Updated Successfully"))}}))})},S=()=>{x.mixin({customClass:{confirmButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",cancelButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:u("Are you sure?"),text:u("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonText:u("Yes, Delete!"),cancelButtonText:u("No, Cancel!"),reverseButtons:!0}).then(m=>{m.isConfirmed&&f.delete(route("requests.destroy",{id:q.request.id}),{preserveScroll:!0,onError:()=>{h().error(u("Error Deleting Request"))},onSuccess:()=>{x.fire(u("Request Removed!"),"","success")}})})};return(b,m)=>(i(),_(B,null,[t(l(T),{title:l(u)("Request Data")},null,8,["title"]),t($,null,{tabs:e(()=>[t(A)]),default:e(()=>[g("div",V,[g("div",I,[t(L,{class:"!mt-0"},{default:e(()=>[g("div",null,[g("div",M,[g("h1",O,s(l(u)("Request #:id Data",{id:r.request.id})),1),b.$page.props.auth.user.roles.includes("admin")?(i(),_("div",Y,[g("form",{onSubmit:y(R,["prevent"]),class:"flex gap-4"},[r.request.status!=="Approved"?(i(),p(w,{key:0,text:l(u)("Approve Request"),onClick:m[0]||(m[0]=D=>{l(f).status=1,v.value=l(u)("approve")}),class:k({"opacity-25":l(f).processing}),disabled:l(f).processing},{default:e(()=>[t(P)]),_:1},8,["text","class","disabled"])):c("",!0),r.request.status!=="Rejected"?(i(),p(w,{key:1,text:l(u)("Reject Request"),onClick:m[1]||(m[1]=D=>{l(f).status=2,v.value=l(u)("reject")}),class:k({"opacity-25":l(f).processing}),disabled:l(f).processing},{default:e(()=>[t(W)]),_:1},8,["text","class","disabled"])):c("",!0)],40,F)])):c("",!0)]),g("h2",U,s(l(u)("Request Info")),1),t(N,null,{default:e(()=>[t(n,{colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("ID")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.id),1)]),_:1})]),_:1}),t(n,{colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Created By")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.employee.name),1)]),_:1})]),_:1}),t(n,null,{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Request Type")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(q.requestTypes[r.request.type]),1)]),_:1})]),_:1}),t(n,null,{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Request Message")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.message),1)]),_:1})]),_:1}),r.request.type==="Leave"&&r.request.leave?(i(),_(B,{key:0},[t(n,{colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Leave Type")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.leave_type),1)]),_:1})]),_:1}),t(n,{colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Leave Duration")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.leave_duration),1)]),_:1})]),_:1}),r.request.leave.start_date?(i(),p(n,{key:0},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Start Date")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.start_date),1)]),_:1})]),_:1})):c("",!0),r.request.leave.end_date?(i(),p(n,{key:1},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("End Date")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.end_date),1)]),_:1})]),_:1})):c("",!0),r.request.leave.half_leave_date?(i(),p(n,{key:2},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Half Leave Date")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.half_leave_date),1)]),_:1})]),_:1})):c("",!0),r.request.leave.half_leave_segment?(i(),p(n,{key:3},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Segment")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.half_leave_segment),1)]),_:1})]),_:1})):c("",!0)],64)):c("",!0),r.request.type==="Remote Work"&&r.request.leave?(i(),p(n,{key:1,colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Remote Work Date")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.leave.remote_work_date),1)]),_:1})]),_:1})):c("",!0),t(n,{colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Submission Date")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.created_at),1)]),_:1})]),_:1}),t(n,{colored:""},{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Status")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.status==="Pending"?l(u)("Pending")+" â³":r.request.status==="Approved"?l(u)("Approved")+" âœ…":l(u)("Rejected")+" ðŸš«"),1)]),_:1})]),_:1}),t(n,null,{default:e(()=>[t(o,null,{default:e(()=>[a(s(l(u)("Admin Response")),1)]),_:1}),t(d,null,{default:e(()=>[a(s(r.request.admin_response??"-"),1)]),_:1})]),_:1})]),_:1}),b.$page.props.auth.user.roles.includes("admin")?(i(),_("form",{key:0,onSubmit:y(S,["prevent"]),class:"flex justify-end"},[t(E,{class:"bg-red-600 hover:bg-red-700 ml-4 mt-4 focus:bg-red-500 active:bg-red-900"},{default:e(()=>[a(s(l(u)("Delete Request")),1)]),_:1})],40,X)):c("",!0)])]),_:1})])])]),_:1})],64))}};export{se as default};
