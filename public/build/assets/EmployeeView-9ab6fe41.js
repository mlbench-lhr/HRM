import{_ as F}from"./GoBackNavLink-8ac5723f.js";import{K as O,a as c,b as y,f as m,y as V,n as U,c as E,d as l,u as n,_ as s,Z as Y,e,t,g as v,h as a,F as k,l as H,i as j}from"./app-aed3c323.js";import{_ as R}from"./EmployeeTabs-6649b0ac.js";import{_ as L}from"./FlexButton-d45fb612.js";import{_ as P}from"./Card-640919b8.js";import{M as $}from"./ModifyIcon-b78b6305.js";import{D as T,_ as r,a as p}from"./DescriptionListItem-3b671ff7.js";import{_ as M}from"./GenericModal-27b35305.js";import{_ as x,a as i}from"./TableHead-d96fcf72.js";import{_ as f,T as A}from"./TableRow-bcd88a53.js";import"./index-7c45f06a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Paginator-766b962a.js";function q(){function D(o){const h={year:"numeric",month:"long",day:"numeric"},g=1800+(parseInt(o.charAt(0))-1)*100+parseInt(o.substr(1,2)),S=parseInt(o.substr(3,2)),u=parseInt(o.substr(5,2)),d=o.substr(7,2),B={"01":"القاهرة","02":"الإسكندرية","03":"بورسعيد","04":"السويس",11:"دمياط",12:"الدقهلية",13:"الشرقية",14:"القليوبية",15:"كفر الشيخ",16:"الغربية",17:"المنوفية",18:"البحيرة",19:"الإسماعيلية",21:"الجيزة",22:"بني سويف",23:"الفيوم",24:"المنيا",25:"أسيوط",26:"سوهاج",27:"قنا",28:"أسوان",29:"الأقصر",31:"البحر الأحمر",32:"الوادي الجديد",33:"مطروح",34:"شمال سيناء",35:"جنوب سيناء",88:"خارج الجمهورية"}[d],I=parseInt(o.charAt(12))%2!==0,w=new Date(g,S-1,u);return{year:g,month:S,day:u,date:w.toLocaleDateString("en-uk",h),date_localized:w.toLocaleDateString(O().props.locale,h),state:B,isMale:I}}return{extractPersonalDetails:D}}function z(D){const o=new Date(D),h=new Date;let N=h.getFullYear()-o.getFullYear();return(h.getMonth()<o.getMonth()||h.getMonth()===o.getMonth()&&h.getDate()<o.getDate())&&N--,Math.abs(N)}const G={class:"overflow-hidden sm:rounded-lg"},K={class:U("grid grid-cols-2")},W={__name:"HistoryDescriptionList",props:{},setup(D){return(o,h)=>(c(),y("div",G,[m("dl",null,[m("div",K,[V(o.$slots,"default")])])]))}},Z={class:"py-8"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"flex justify-between items-center mb-4"},X={class:"card-header"},ee={class:"flex inline-flex gap-4"},le={class:"card-subheader"},te=["href"],ae=["href"],ne=["href"],se={class:"mb-2 ml-1 font-semibold"},oe={class:"mb-2 ml-1 font-semibold"},ue={key:0,class:"text-center py-4"},de=m("h2",{class:"mb-2 ml-1 font-semibold"},"Leave History",-1),re={key:0},_e={key:1},ie={key:1,class:"text-center py-4"},fe={class:"mb-2 ml-1 font-semibold"},me={class:"px-4 py-3.5"},ce={class:"text-sm font-medium"},pe={class:"px-4 py-3.5"},he={class:"text-sm font-medium"},ye={class:"px-4 py-3.5"},ge={class:"text-sm font-medium"},we={__name:"EmployeeView",props:{employee:Object},setup(D){const o=D;let{extractPersonalDetails:h}=q();const N=E(()=>{var g;return((g=o.employee)==null?void 0:g.leave_requests)??[]}),C=E(()=>{var B;const S=(((B=o.employee)==null?void 0:B.manages)??[]).map(b=>({department_id:b.department_id,branch_id:b.branch_id})).filter(b=>b.department_id||b.branch_id),u=S.map(b=>b.branch_id).filter(Boolean).join(", "),d=S.map(b=>b.department_id).filter(Boolean).join(", ");let _="";return u&&(_+=s("Branches")+`: #${u}`),d&&(_+=(_?" - ":"")+s("Departments")+`: #${d}`),_});return(g,S)=>(c(),y(k,null,[l(n(Y),{title:n(s)("Employee View")},null,8,["title"]),l(F,null,{tabs:e(()=>[l(R)]),default:e(()=>[m("div",Z,[m("div",J,[l(P,{class:"!mt-0"},{default:e(()=>{var u;return[m("div",Q,[m("h1",X,t(n(s)("Employee View :ifAdmin",{ifAdmin:(u=o.employee.manages)!=null&&u.length?"("+n(s)("Manager")+")":""})),1),m("div",ee,[g.$page.props.auth.user.roles.includes("admin")?(c(),v(L,{key:0,text:n(s)("Modify Employee Data"),href:g.route("employees.edit",{id:o.employee.id})},{default:e(()=>[l($)]),_:1},8,["text","href"])):(c(),v(L,{key:1,text:n(s)("Modify Data"),href:g.route("profile.edit",{id:o.employee.id})},{default:e(()=>[l($)]),_:1},8,["text","href"]))])]),m("h2",le,t(n(s)("Basic Info")),1),l(T,null,{default:e(()=>[l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Name")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(o.employee.name),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("ID")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(o.employee.id),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Phone")),1)]),_:1}),l(r,null,{default:e(()=>[m("a",{href:"tel:"+o.employee.phone},t(o.employee.phone),9,te)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("National ID")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(o.employee.national_id),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Email")),1)]),_:1}),l(r,null,{default:e(()=>[m("a",{href:"mailto:"+o.employee.email},t(o.employee.email),9,ae)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Gender")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(n(h)(o.employee.national_id).isMale?n(s)("Male"):n(s)("Female")),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Bank Account Details")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(o.employee.bank_acc_no??n(s)("N/A")),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Birthday")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(n(h)(o.employee.national_id).date_localized+" - "+n(z)(n(h)(o.employee.national_id).date)+" "+n(s)("Years")),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Hire Date")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(o.employee.hired_on),1)]),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Remote Worker?")),1)]),_:1}),l(r,null,{default:e(()=>[a(t(o.employee.is_remote?n(s)("Yes"):n(s)("No")),1)]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Address")),1)]),_:1}),l(r,null,{default:e(()=>[m("a",{href:"https://www.google.com/maps/search/?api=1&query="+o.employee.address,target:"_blank"},t(o.employee.address),9,ne)]),_:1})]),_:1})]),_:1})]}),_:1}),l(P,null,{default:e(()=>[m("h2",se,t(n(s)("Technical Info")),1),l(T,null,{default:e(()=>[l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Branch")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[a(t(((u=o.employee.branch)==null?void 0:u.name)??n(s)("N/A")),1)]}),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Department")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[a(t(((u=o.employee.department)==null?void 0:u.name)??n(s)("N/A")),1)]}),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Salary")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[a(t((u=o.employee.salaries)!=null&&u.length?o.employee.salaries.at(-1).salary.toLocaleString()+" "+o.employee.salaries.at(-1).currency:n(s)("N/A")),1)]}),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Position")),1)]),_:1}),l(r,null,{default:e(()=>{var u,d;return[a(t((u=o.employee.employee_positions)!=null&&u.length?((d=o.employee.employee_positions.at(-1).position)==null?void 0:d.name)??n(s)("N/A"):n(s)("N/A")),1)]}),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Shift")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[a(t((u=o.employee.employee_shifts)!=null&&u.length?o.employee.employee_shifts.filter(d=>d.end_date===null).map(d=>{var _;return(_=d.shift)==null?void 0:_.name})[0]??n(s)("N/A"):n(s)("N/A")),1)]}),_:1})]),_:1}),l(r,{colored:""},{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Access Permissions")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[a(t((u=o.employee.roles)!=null&&u.length?o.employee.roles.at(-1).name.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase()):n(s)("Not Assigned")),1)]}),_:1})]),_:1}),l(r,null,{default:e(()=>[l(p,null,{default:e(()=>[a(t(n(s)("Manages")),1)]),_:1}),l(r,null,{default:e(()=>{var u;return[a(t((u=o.employee.manages)!=null&&u.length?C.value:n(s)("Nothing")),1)]}),_:1})]),_:1})]),_:1})]),_:1}),l(P,null,{default:e(()=>{var u,d;return[m("h2",oe,t(n(s)("Leave Allocations")),1),l(x,{totalNumber:((u=o.employee.leave_allocations)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(i,null,{default:e(()=>[a(t(n(s)("Total Leaves")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Casual Leaves")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Sick Leaves")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Used Leaves")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Remaining Leaves")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Unpaid Leaves")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Year")),1)]),_:1})]),Body:e(()=>[(c(!0),y(k,null,H(o.employee.leave_allocations??[],_=>(c(),v(A,{key:_.id},{default:e(()=>[l(f,null,{default:e(()=>[a(t(_.total_leaves),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(_.casual_leaves),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(_.sick_leaves),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(_.used_leaves),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(_.remaining_leaves),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(_.unpaid_leaves),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(_.year),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"]),(d=o.employee.leave_allocations)!=null&&d.length?j("",!0):(c(),y("p",ue,t(n(s)("No leave allocations found")),1))]}),_:1}),l(P,null,{default:e(()=>{var u;return[de,(u=N.value)!=null&&u.length?(c(),v(x,{key:0,totalNumber:N.value.length,enablePaginator:!1},{Head:e(()=>[l(i,null,{default:e(()=>[a("Type")]),_:1}),l(i,null,{default:e(()=>[a("From")]),_:1}),l(i,null,{default:e(()=>[a("To")]),_:1}),l(i,null,{default:e(()=>[a("Duration")]),_:1}),l(i,null,{default:e(()=>[a("Half")]),_:1}),l(i,null,{default:e(()=>[a("Status")]),_:1}),l(i,null,{default:e(()=>[a("Remaining")]),_:1}),l(i,null,{default:e(()=>[a("Unpaid")]),_:1})]),Body:e(()=>[(c(!0),y(k,null,H(N.value,d=>(c(),v(A,{key:d.id},{default:e(()=>[l(f,null,{default:e(()=>[a(t(d.leave_type),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.start_date??"—"),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.end_date??"—"),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.leave_duration),1)]),_:2},1024),l(f,null,{default:e(()=>[d.half_leave_date?(c(),y("span",re,t(d.half_leave_date)+" ("+t(d.half_leave_segment)+") ",1)):(c(),y("span",_e,"—"))]),_:2},1024),l(f,null,{default:e(()=>{var _;return[a(t(((_=d.request)==null?void 0:_.status)??"Unknown"),1)]}),_:2},1024),l(f,null,{default:e(()=>[a(t(d.remaining_after),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.unpaid_leave),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])):(c(),y("p",ie," No leave history found "))]}),_:1}),l(P,null,{default:e(()=>[m("h2",fe,t(n(s)("History")),1),l(W,null,{default:e(()=>[m("div",me,[m("dt",ce,t(n(s)("Previous Salaries")),1),l(M,{modalId:"Salaries Modal",title:n(s)("Click Here To See Salary History"),modalHeader:n(s)("Previous Salaries"),hasCancel:!1},{default:e(()=>{var u;return[l(x,{totalNumber:((u=o.employee.salaries)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(i,null,{default:e(()=>[a(t(n(s)("Currency")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Salary")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Starting From")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Ending At")),1)]),_:1})]),Body:e(()=>[(c(!0),y(k,null,H(o.employee.salaries??[],d=>(c(),v(A,{key:d.id},{default:e(()=>[l(f,null,{default:e(()=>[a(t(d.currency),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.salary),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.start_date),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.end_date??n(s)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])]}),_:1},8,["title","modalHeader"])]),m("div",pe,[m("dt",he,t(n(s)("Previous Positions")),1),l(M,{modalId:"Positions Modal",title:n(s)("Click Here To See Positions History"),modalHeader:n(s)("Previous Positions"),hasCancel:!1},{default:e(()=>{var u;return[l(x,{totalNumber:((u=o.employee.employee_positions)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(i,null,{default:e(()=>[a(t(n(s)("Position")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Starting From")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Ending At")),1)]),_:1})]),Body:e(()=>[(c(!0),y(k,null,H(o.employee.employee_positions??[],d=>(c(),v(A,{key:d.id},{default:e(()=>[l(f,null,{default:e(()=>{var _;return[a(t(((_=d.position)==null?void 0:_.name)??n(s)("DELETED POSITION")),1)]}),_:2},1024),l(f,null,{default:e(()=>[a(t(d.start_date),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.end_date??n(s)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])]}),_:1},8,["title","modalHeader"])]),m("div",ye,[m("dt",ge,t(n(s)("Previous Shifts")),1),l(M,{modalId:"Shifts Modal",title:n(s)("Click Here To See Shifts History"),modalHeader:n(s)("Previous Shifts"),hasCancel:!1},{default:e(()=>{var u;return[l(x,{totalNumber:((u=o.employee.employee_shifts)==null?void 0:u.length)||0,enablePaginator:!1},{Head:e(()=>[l(i,null,{default:e(()=>[a(t(n(s)("Shift")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Starting From")),1)]),_:1}),l(i,null,{default:e(()=>[a(t(n(s)("Ending At")),1)]),_:1})]),Body:e(()=>[(c(!0),y(k,null,H(o.employee.employee_shifts??[],d=>(c(),v(A,{key:d.id},{default:e(()=>[l(f,null,{default:e(()=>{var _;return[a(t(((_=d.shift)==null?void 0:_.name)??n(s)("DELETED SHIFT")),1)]}),_:2},1024),l(f,null,{default:e(()=>[a(t(d.start_date),1)]),_:2},1024),l(f,null,{default:e(()=>[a(t(d.end_date??n(s)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["totalNumber"])]}),_:1},8,["title","modalHeader"])])]),_:1})]),_:1})])])]),_:1})],64))}};export{we as default};
