import{c as T,T as U,w as C,o as E,a as y,b as x,d as i,u as e,_ as a,Z as S,e as p,f as s,t as n,j as O,n as u,h as r,i as q,F as v,l as N,g as $,m as b,y as h,p as j}from"./app-bc190c63.js";import{_ as A}from"./AuthenticatedLayout-e7612e28.js";import{_ as D}from"./OrgTabs-7ef35370.js";import{_}from"./InputLabel-4f3684c4.js";import{_ as f}from"./TextInput-c6a7c76e.js";import{_ as m}from"./InputError-5055f7a0.js";import{P as W}from"./PrimaryButton-028e34d8.js";import{S as w}from"./sweetalert2.all-f07c82dc.js";/* empty css             */import{i as G}from"./index-7c45f06a.js";import{_ as g}from"./ToolTip-699e6096.js";import{_ as F}from"./Card-4fa6fb32.js";import{_ as M}from"./Notice-6a7008c9.js";import{u as Y}from"./switch-a4583cdf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./GoBackNavLink-23c814c4.js";const L={class:"py-8"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"card-header !mb-6"},J=["onSubmit"],K={class:"mt-2"},Q={class:"underline text-purple-500 text-sm",target:"_blank",href:"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"},R=s("br",null,null,-1),X={class:"mt-2"},ee=s("br",null,null,-1),le=s("br",null,null,-1),se=s("br",null,null,-1),ae={class:"block"},oe={class:"mt-1"},te=s("br",null,null,-1),ie=s("br",null,null,-1),ne=s("br",null,null,-1),re=s("br",null,null,-1),de={key:0,class:"block text-xs"},ce=s("br",null,null,-1),ue={class:"mt-2"},me={class:"mt-2"},_e={class:"mt-2"},pe={class:"mt-2"},fe=s("br",null,null,-1),be={class:"mt-2"},he={class:"mt-2"},ye={class:"ul-checkbox mt-1",dir:"ltr"},ge={class:"li-checkbox"},xe={class:"flex items-center pl-3"},ke={for:"saturday-checkbox",class:"li-checkbox-label"},ve={class:"li-checkbox"},we={class:"flex items-center pl-3"},ze={for:"sunday-checkbox",class:"li-checkbox-label"},Ve={class:"li-checkbox"},Pe={class:"flex items-center pl-3"},Be={for:"monday-checkbox",class:"li-checkbox-label"},Ie={class:"li-checkbox"},Te={class:"flex items-center pl-3"},Ue={for:"tuesday-checkbox",class:"li-checkbox-label"},Ce={class:"li-checkbox"},Ee={class:"flex items-center pl-3"},Se={for:"wednesday-checkbox",class:"li-checkbox-label"},Oe={class:"li-checkbox"},qe={class:"flex items-center pl-3"},Ne={for:"thursday-checkbox",class:"li-checkbox-label"},$e={class:"w-full dark:border-gray-600"},je={class:"flex items-center pl-3"},Ae={for:"friday-checkbox",class:"li-checkbox-label"},De={class:"flex items-center justify-end mt-4"},al={__name:"GlobalsEdit",props:{globals:Object},setup(z){var k;const c=z,V=T(()=>Object.keys(l.errors).filter(d=>d.startsWith("ip")).reduce((d,o)=>(d[o]=l.errors[o],d),{})),l=U({organization_name:c.globals.organization_name,timezone:c.globals.timezone,is_ip_based:!!c.globals.is_ip_based,ip:c.globals.is_ip_based?((k=c.globals.ip)==null?void 0:k.join(", "))??"":"",email:c.globals.email,organization_address:c.globals.organization_address,absence_limit:c.globals.absence_limit,payroll_day:c.globals.payroll_day,weekend_off_days:c.globals.weekend_off_days??[],income_tax:c.globals.income_tax}),P=()=>{w.mixin({customClass:{confirmButton:"mx-4 text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900",cancelButton:"text-white bg-gray-500 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-900"},buttonsStyling:!1}).fire({title:a("Are you sure?"),text:a("Globals data is central to this application data integrity!"),icon:"warning",showCancelButton:!0,confirmButtonText:a("Yes, Confirm!"),cancelButtonText:a("No, Cancel!"),reverseButtons:!0}).then(o=>{o.isConfirmed&&(l.ip!==null&&!Array.isArray(l.ip)&&(l.ip=l.ip.split(",").map(t=>t.trim()).filter(t=>t!==null&&t!=="")),l.put(route("globals.update"),{preserveScroll:!0,onError:()=>{j().error(a("Error Editing Globals"))},onSuccess:()=>{w.fire(a("Global Data Changed Successfully"),"","success")}}))})};async function B(){l.ip="Fetching IP, Please Wait...",fetch("https://api.ipify.org/?format=json").then(d=>{if(!d.ok)throw new Error("Network response was not ok");return d.json()}).then(d=>{l.ip=d.ip}).catch(d=>{console.error("Error fetching IP:",d.message)})}return C(()=>l.is_ip_based,d=>{d||(l.ip=null)}),E(()=>{G()}),(d,o)=>(y(),x(v,null,[i(e(S),{title:e(a)("Edit Organization Data")},null,8,["title"]),i(A,null,{tabs:p(()=>[i(D)]),default:p(()=>[s("div",L,[s("div",Z,[i(F,{class:"!mt-0"},{default:p(()=>[s("h1",H,n(e(a)("Edit Organization Data")),1),i(M,{type:"warning",bold:e(a)("Warning!"),br:"",text:e(a)("Changing timezone in production can cause unexepected behavior in the attendance system")+". "+e(a)("Please revise the attendance list of the current week after changing the timezone")+"."},null,8,["bold","text"]),s("form",{onSubmit:O(P,["prevent"])},[s("div",null,[i(_,{for:"organization_name",value:e(a)("Organization Name")},null,8,["value"]),i(f,{id:"organization_name",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.organization_name}]),modelValue:e(l).organization_name,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).organization_name=t),required:"",autocomplete:"off",placeholder:e(a)("Organization Name")},null,8,["class","modelValue","placeholder"]),i(m,{class:"mt-2",message:e(l).errors.organization_name},null,8,["message"])]),s("div",K,[i(_,{for:"timezone",value:e(a)("Time Zone"),class:"inline"},null,8,["value"]),s("a",Q,n(" "+e(a)("(list)")),1),i(g,null,{default:p(()=>[r(n(e(a)(`This is the timezone that will be used to calculate the time related data in the
                                application.`))+" ",1),R,r(" "+n(e(a)("Please choose a timezone from the list.")),1)]),_:1}),i(f,{id:"timezone",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.timezone}]),modelValue:e(l).timezone,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).timezone=t),required:"",autocomplete:"off",placeholder:"Africa/Cairo"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.timezone},null,8,["message"])]),s("div",X,[i(_,{class:"inline",for:"is_remote",value:e(a)("Enable IP-Based Attendance?")},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(a)("The set IPs will be used to compare employee attendance's IP with it"))+". ",1),ee,r(" "+n(e(a)("If the IPs mismatch, it means the employee is registering their attendance"))+" ",1),le,r(" "+n(e(a)("from outside the organization. Thus, the attendance will be discarded"))+".",1),se,r(" "+n(e(a)("You can turn this option off on this page"))+". ",1)]),_:1}),s("div",ae,[i(e(Y),{dir:"ltr",modelValue:e(l).is_ip_based,"onUpdate:modelValue":o[2]||(o[2]=t=>e(l).is_ip_based=t),class:u([e(l).is_ip_based?"bg-purple-600":"bg-gray-400","col-span-4 mt-2 relative inline-flex h-6 w-11 items-center rounded-full"])},{default:p(()=>[s("span",{class:u([e(l).is_ip_based?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"])]),i(m,{class:"mt-2",message:e(l).errors.is_ip_based},null,8,["message"])]),s("div",oe,[i(_,{for:"ip",value:e(a)("Organization Public IP Address(es) - Separate multiple values by commas"),class:"inline"},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(a)("This IP(s) will be used to compare employee attendance's IP with it."))+" ",1),te,r(" "+n(e(a)("If the IPs mismatch, it means the employee is registering their attendance"))+" ",1),ie,r(" "+n(e(a)("from outside the organization. Thus, the attendance will be discarded.")),1),ne,r(" "+n(e(a)("You can turn this option off on this page"))+".",1),re,r(" "+n(e(a)("Note: Supports IPv4 Only"))+". ",1)]),_:1}),e(l).is_ip_based?(y(),x("span",de,[s("a",{onClick:o[3]||(o[3]=t=>B()),class:"underline text-purple-500",href:"#"},n(e(a)(`Grab Yours from
                                    Here, `)),1),r(" "+n(e(a)(`and make sure you are at your organization while setting this value, otherwise, all
                                employee
                                attendances will be rejected even if they are inside the organization.`))+" ",1),ce,r(" "+n(e(a)("If this app is hosted locally, you can use '192.168.1.*'")),1)])):q("",!0),i(f,{id:"timezone",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.ip,"opacity-75 bg-gray-100 cursor-not-allowed":!e(l).is_ip_based}]),disabled:!e(l).is_ip_based,modelValue:e(l).ip,"onUpdate:modelValue":o[4]||(o[4]=t=>e(l).ip=t),required:e(l).is_ip_based,autocomplete:"off",placeholder:"193.107.235.96"},null,8,["class","disabled","modelValue","required"]),i(m,{class:"mt-2",message:e(l).errors.ip},null,8,["message"]),(y(!0),x(v,null,N(V.value,(t,I)=>(y(),$(m,{key:I,message:t},null,8,["message"]))),128))]),s("div",ue,[i(_,{for:"email",value:e(a)("Organization Email")},null,8,["value"]),i(f,{id:"email",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.email}]),modelValue:e(l).email,"onUpdate:modelValue":o[5]||(o[5]=t=>e(l).email=t),required:"",autocomplete:"off",placeholder:"ceo@oraby.com"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.email},null,8,["message"])]),s("div",me,[i(_,{for:"organization_address",value:e(a)("Organization Address")},null,8,["value"]),i(f,{id:"organization_address",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.organization_address}]),modelValue:e(l).organization_address,"onUpdate:modelValue":o[6]||(o[6]=t=>e(l).organization_address=t),required:"",autocomplete:"off",placeholder:e(a)("114 Juhayna Sq. 6th of October City, Giza, Egypt")},null,8,["class","modelValue","placeholder"]),i(m,{class:"mt-2",message:e(l).errors.organization_address},null,8,["message"])]),s("div",_e,[i(_,{for:"absence_limit",value:e(a)("Absence Limit")},null,8,["value"]),i(f,{id:"absence_limit",type:"number",min:"1",max:"365",step:"1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.absence_limit}]),modelValue:e(l).absence_limit,"onUpdate:modelValue":o[7]||(o[7]=t=>e(l).absence_limit=t),required:"",autocomplete:"off",placeholder:"8"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.absence_limit},null,8,["message"])]),s("div",pe,[i(_,{for:"payroll_day",value:e(a)("Payroll Day"),class:"inline"},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(a)(`Which day should the salaries be paid on. Payrolls will be generated automatically that
                                day on
                                00:00.`))+" ",1),fe,r(" "+n(e(a)(`The generated payrolls account for the previous month's work, from day 1 until the end
                                of the
                                previous month.`)),1)]),_:1}),i(f,{id:"payroll_day",type:"number",min:"1",max:"31",step:"1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.payroll_day}]),modelValue:e(l).payroll_day,"onUpdate:modelValue":o[8]||(o[8]=t=>e(l).payroll_day=t),required:"",autocomplete:"off",placeholder:"8"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.payroll_day},null,8,["message"])]),s("div",be,[i(_,{for:"income_tax",value:e(a)("Income Tax Percentage")},null,8,["value"]),i(f,{id:"income_tax",type:"number",min:"0",max:"100",step:"0.1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.income_tax}]),modelValue:e(l).income_tax,"onUpdate:modelValue":o[9]||(o[9]=t=>e(l).income_tax=t),required:"",autocomplete:"off",placeholder:"14"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.income_tax},null,8,["message"])]),s("div",he,[i(_,{for:"weekend_off_days",value:e(a)("Weekend Off Days")},null,8,["value"]),s("ul",ye,[s("li",ge,[s("div",xe,[b(s("input",{id:"saturday-checkbox",type:"checkbox","onUpdate:modelValue":o[10]||(o[10]=t=>e(l).weekend_off_days=t),value:"saturday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",ke,n(e(a)("Saturday")),1)])]),s("li",ve,[s("div",we,[b(s("input",{id:"sunday-checkbox",type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=t=>e(l).weekend_off_days=t),value:"sunday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",ze,n(e(a)("Sunday")),1)])]),s("li",Ve,[s("div",Pe,[b(s("input",{id:"monday-checkbox",type:"checkbox","onUpdate:modelValue":o[12]||(o[12]=t=>e(l).weekend_off_days=t),value:"monday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Be,n(e(a)("Monday")),1)])]),s("li",Ie,[s("div",Te,[b(s("input",{id:"tuesday-checkbox",type:"checkbox","onUpdate:modelValue":o[13]||(o[13]=t=>e(l).weekend_off_days=t),value:"tuesday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Ue,n(e(a)("Tuesday")),1)])]),s("li",Ce,[s("div",Ee,[b(s("input",{id:"wednesday-checkbox",type:"checkbox","onUpdate:modelValue":o[14]||(o[14]=t=>e(l).weekend_off_days=t),value:"wednesday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Se,n(e(a)("Wednesday")),1)])]),s("li",Oe,[s("div",qe,[b(s("input",{id:"thursday-checkbox",type:"checkbox","onUpdate:modelValue":o[15]||(o[15]=t=>e(l).weekend_off_days=t),value:"thursday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Ne,n(e(a)("Thursday")),1)])]),s("li",$e,[s("div",je,[b(s("input",{id:"friday-checkbox",type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=t=>e(l).weekend_off_days=t),value:"friday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",Ae,n(e(a)("Friday")),1)])])]),i(m,{class:"mt-2",message:e(l).errors.weekend_off_days},null,8,["message"])]),s("div",De,[i(W,{class:u(["ltr:ml-4 rtl:mr-4",{"opacity-25":e(l).processing}]),disabled:e(l).processing},{default:p(()=>[r(n(e(a)("Edit Data")),1)]),_:1},8,["class","disabled"])])],40,J)]),_:1})])])]),_:1})],64))}};export{al as default};
